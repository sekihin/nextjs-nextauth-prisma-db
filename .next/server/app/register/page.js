(()=>{var e={};e.id=454,e.ids=[454],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},38313:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>f,tree:()=>u});var n=r(70260),i=r(28203),s=r(25155),o=r.n(s),a=r(67292),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let u=["",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,80532)),"D:\\nextjs-nextauth-prisma-db\\src\\app\\register\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"D:\\nextjs-nextauth-prisma-db\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\nextjs-nextauth-prisma-db\\src\\app\\register\\page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/register/page",pathname:"/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},60772:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"40701ba594f702e3206ee6d43e3a8a2ebfe8deb1e6":()=>n.$$RSC_SERVER_ACTION_0});var n=r(80532)},75141:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,96313,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},11589:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,86013,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},47457:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,75197,23)),Promise.resolve().then(r.bind(r,33055))},83905:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,87801,23)),Promise.resolve().then(r.bind(r,11715))},7108:()=>{},60260:()=>{},11715:(e,t,r)=>{"use strict";r.d(t,{SubmitButton:()=>s});var n=r(45512);r(58009);var i=r(55740);function s({children:e}){let{pending:t}=(0,i.useFormStatus)();return(0,n.jsxs)("button",{type:t?"button":"submit",disabled:t,className:"flex h-10 w-full items-center justify-center rounded-md border text-sm transition-all focus:outline-none",children:[e,t&&(0,n.jsxs)("svg",{className:"animate-spin ml-2 h-4 w-4 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),(0,n.jsx)("span",{"aria-live":"polite",className:"sr-only",role:"status",children:t?"Loading":"Submit form"})]})}},20308:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var n=r(75197),i=r.n(n)},88977:(e,t,r)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n.registerServerReference}});let n=r(46760)},11271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return s}});let n=r(39274),i=r(26552);function s(e){return(0,i.isRedirectError)(e)||(0,n.isNotFoundError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},67359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return n.RedirectType},notFound:function(){return i.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unstable_rethrow:function(){return s.unstable_rethrow}});let n=r(26552),i=r(39274),s=r(51370);class o extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new o}delete(){throw new o}set(){throw new o}sort(){throw new o}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},11541:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},26552:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return a},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return f},getURLFromRedirectError:function(){return d},isRedirectError:function(){return c},permanentRedirect:function(){return u},redirect:function(){return l}});let i=r(19121),s=r(11541),o="NEXT_REDIRECT";function a(e,t,r){void 0===r&&(r=s.RedirectStatusCode.TemporaryRedirect);let n=Error(o);return n.digest=o+";"+t+";"+e+";"+r+";",n}function l(e,t){let r=i.actionAsyncStorage.getStore();throw a(e,t||((null==r?void 0:r.isAction)?"push":"replace"),s.RedirectStatusCode.TemporaryRedirect)}function u(e,t){throw void 0===t&&(t="replace"),a(e,t,s.RedirectStatusCode.PermanentRedirect)}function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,i=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===o&&("replace"===n||"push"===n)&&"string"==typeof i&&!isNaN(a)&&a in s.RedirectStatusCode}function d(e){return c(e)?e.digest.split(";").slice(2,-2).join(";"):null}function f(e){if(!c(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!c(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},51370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,o.isNextRouterError)(t)||(0,s.isBailoutToCSRError)(t)||(0,n.isDynamicUsageError)(t)||(0,i.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(62349),i=r(67418),s=r(40627),o=r(11271);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},75197:(e,t,r)=>{let{createProxy:n}=r(73439);e.exports=n("D:\\nextjs-nextauth-prisma-db\\node_modules\\next\\dist\\client\\link.js")},62349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return a}});let n=r(42490),i=r(40627),s=r(11271),o=r(10436),a=e=>(0,n.isDynamicServerError)(e)||(0,i.isBailoutToCSRError)(e)||(0,s.isNextRouterError)(e)||(0,o.isDynamicPostpone)(e)},54175:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return o},decrypt:function(){return u},encrypt:function(){return l},getActionEncryptionKey:function(){return m},getClientReferenceManifestForRsc:function(){return p},getServerModuleMap:function(){return f},setReferenceManifestsSingleton:function(){return d},stringToUint8Array:function(){return a}});let i=r(39212),s=r(29294);function o(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function a(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function l(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function u(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}let c=Symbol.for("next.server.action-manifests");function d({page:e,clientReferenceManifest:t,serverActionsManifest:r,serverModuleMap:n}){var i;let s=null==(i=globalThis[c])?void 0:i.clientReferenceManifestsPerPage;globalThis[c]={clientReferenceManifestsPerPage:{...s,[h(e)]:t},serverActionsManifest:r,serverModuleMap:n}}function f(){let e=globalThis[c];if(!e)throw new i.InvariantError("Missing manifest for Server Actions.");return e.serverModuleMap}function p(){let e=globalThis[c];if(!e)throw new i.InvariantError("Missing manifest for Server Actions.");let{clientReferenceManifestsPerPage:t}=e,r=s.workAsyncStorage.getStore();if(!r)return function(e){let t=Object.values(e),r={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let e of t)r.clientModules={...r.clientModules,...e.clientModules},r.edgeRscModuleMapping={...r.edgeRscModuleMapping,...e.edgeRscModuleMapping},r.rscModuleMapping={...r.rscModuleMapping,...e.rscModuleMapping};return r}(t);let n=h(r.page),o=t[n];if(!o)throw new i.InvariantError(`Missing Client Reference Manifest for ${n}.`);return o}async function m(){if(n)return n;let e=globalThis[c];if(!e)throw new i.InvariantError("Missing manifest for Server Actions.");let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw new i.InvariantError("Missing encryption key for Server Actions");return n=await crypto.subtle.importKey("raw",a(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}function h(e){return e.replace(/\/(page|route)$/,"")}},98063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return f},encryptActionBoundArgs:function(){return d}}),r(27315);let n=r(46760),i=r(8534),s=r(57212),o=r(54175),a=new TextEncoder,l=new TextDecoder;async function u(e,t){let r=await (0,o.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=atob(t),i=n.slice(0,16),s=n.slice(16),a=l.decode(await (0,o.decrypt)(r,(0,o.stringToUint8Array)(i),(0,o.stringToUint8Array)(s)));if(!a.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return a.slice(e.length)}async function c(e,t){let r=await (0,o.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=new Uint8Array(16);crypto.getRandomValues(n);let i=(0,o.arrayBufferToString)(n.buffer),s=await (0,o.encrypt)(r,n,a.encode(e+t));return btoa(i+(0,o.arrayBufferToString)(s))}async function d(e,t){let{clientModules:r}=(0,o.getClientReferenceManifestForRsc)(),i=await (0,s.streamToString)((0,n.renderToReadableStream)(t,r));return await c(e,i)}async function f(e,t){let{edgeRscModuleMapping:r,rscModuleMapping:n}=(0,o.getClientReferenceManifestForRsc)(),s=await u(e,await t);return await (0,i.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(a.encode(s)),e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:n,serverModuleMap:(0,o.getServerModuleMap)()}})}},67418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let r=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},40627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return i}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},71354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>l});var n=r(62740);r(76301),r(61135);var i=r(7653),s=r.n(i);let o="Next.js + Postgres Auth Starter",a="This is a Next.js starter kit that uses NextAuth.js for simple email + password login and a Postgres database to persist the data.",l={title:o,description:a,twitter:{card:"summary_large_image",title:o,description:a},metadataBase:new URL("https://nextjs-postgres-auth.vercel.app")};function u({children:e}){return(0,n.jsx)("html",{lang:"en",children:(0,n.jsx)("body",{className:s().variable,children:e})})}},80532:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$RSC_SERVER_ACTION_0:()=>d,default:()=>f});var n=r(62740),i=r(88977);r(98063);var s=r(20308);function o({action:e,children:t}){let r="form-control block w-full px-4 py-5 text-sm font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none";return(0,n.jsxs)("form",{action:e,className:"flex flex-col space-y-4 bg-gray-50 px-4 py-8 sm:px-16",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-xs text-gray-600 uppercase",children:"Email Address"}),(0,n.jsx)("input",{id:"name",name:"name",type:"text",placeholder:"Name...",autoComplete:"email",required:!0,className:`${r}`})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-xs text-gray-600 uppercase",children:"Email Address"}),(0,n.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"Email address...",autoComplete:"email",required:!0,className:`${r}`})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-xs text-gray-600 uppercase",children:"Password"}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"*************",required:!0,className:`${r}`})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"repeat-pass",className:"block text-xs text-gray-600 uppercase",children:"Repeat Password"}),(0,n.jsx)("input",{id:"repeat-pass",name:"repeat-pass",type:"password",placeholder:"*************",required:!0,className:`${r}`})]}),t]})}r(76301);var a=r(67359),l=r(76085),u=r(33055),c=r(43373);let d=async function(e){let t=e.get("name"),r=e.get("email"),n=(0,c.F$)(e.get("password"));if(await (0,l.Wl)(r))return"User already exists";await (0,l.Fk)({name:t,email:r,password:n}),(0,a.redirect)("/signin")};function f(){var e=(0,i.A)(d,"40701ba594f702e3206ee6d43e3a8a2ebfe8deb1e6",null);return(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{className:"container mx-auto",children:(0,n.jsxs)("div",{className:"flex flex-wrap -mx-2",children:[(0,n.jsx)("div",{className:"md:w-6/12 px-2",children:(0,n.jsx)("img",{src:"/undraw_remotely_2j6y.svg",alt:"Image",className:"img-fluid"})}),(0,n.jsx)("div",{className:"md:w-6/12 px-2 contents",children:(0,n.jsxs)("div",{className:"flex flex-wrap -mx-2 justify-center",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center card shadow-md",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold",children:"Sign Up"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Create an account with your email and password"})]}),(0,n.jsxs)(o,{action:e,children:[(0,n.jsx)(u.SubmitButton,{children:"Sign Up"}),(0,n.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Already have an account? ",(0,n.jsx)(s.default,{href:"/signin",className:"font-semibold text-gray-800",children:"Sign in"})," instead."]})]})]})})]})})})}},33055:(e,t,r)=>{"use strict";r.d(t,{SubmitButton:()=>n});let n=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call SubmitButton() from the server but SubmitButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\nextjs-nextauth-prisma-db\\src\\app\\submit-button.tsx","SubmitButton")},76085:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,Fk:()=>l,Wl:()=>a});var n=r(96330),i=r(84908),s=r(691);let o=async e=>{try{return await i.A.users.findUnique({where:{email:String(e?.email),password:String(e?.password)}})}catch(e){throw e instanceof n.Prisma.PrismaClientKnownRequestError&&"P2002"===e.code&&console.log("There is a unique constraint violation, a new user cannot be created with this email"),e}},a=async e=>{try{return await i.A.users.findUnique({where:{email:String(e)}})}catch(e){throw e instanceof n.Prisma.PrismaClientKnownRequestError&&"P2002"===e.code&&console.log("There is a unique constraint violation, a new user cannot be created with this email"),e}},l=async e=>await i.A.users.create({data:{id:(0,s.A)(),name:String(e?.name),email:String(e?.email),password:String(e?.password),role:"admin"}})},84908:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=new(r(96330)).PrismaClient},43373:(e,t,r)=>{"use strict";r.d(t,{F$:()=>o});var n=r(30379);let i=require("bcrypt");var s=r.n(i);function o(e){return s().hash(e,10).then(function(e){return e})}(0,n.Ik)({email:(0,n.Yj)({required_error:"Email is required"}).min(1,"Email is required").email("Invalid email"),password:(0,n.Yj)({required_error:"Password is required"}).min(8,"Password must be more than 7 characters").max(32,"Password must be less than 32 characters")}),(0,n.Ik)({email:(0,n.Yj)({required_error:"Email is required"}).min(1,"Email is required").email("Invalid email"),password:(0,n.Yj)({required_error:"Password is required"}).min(1,"Password is required").min(8,"Password must be more than 8 characters").max(32,"Password must be less than 32 characters")})},61135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[681,260,801,629],()=>r(38313));module.exports=n})();